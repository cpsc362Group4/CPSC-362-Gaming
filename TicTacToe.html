<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic Tac Toe</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #22d3ee;
      --accent-2: #a78bfa;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --win: #16a34a;
      --lose: #dc2626;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient( 1200px 800px at 80% -10%, #1f2937 0%, var(--bg) 60%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .app {
      width: min(92vw, 720px);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
      padding: 20px;
      backdrop-filter: blur(6px);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }

    .title { font-weight: 700; letter-spacing: .5px; }
    .badge {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(34,211,238,0.12);
      color: var(--accent);
      border: 1px solid rgba(34,211,238,0.35);
      font-size: 12px;
    }

    .status {
      display: flex; align-items: center; gap: 10px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      padding: 10px 12px; border-radius: 12px;
      margin: 12px 0 16px;
      min-height: 44px;
      font-weight: 600;
    }
    .status small { color: var(--muted); font-weight: 500; }

    .board {
      --size: min(82vw, 540px);
      width: var(--size);
      height: var(--size);
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 12px;
    }

    .cell {
      display: grid; place-items: center;
      border-radius: 18px;
      background: linear-gradient(180deg, #0b1220, #0a1020);
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 6px 20px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.05);
      position: relative;
      transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
      user-select: none;
    }
    .cell:focus-within { outline: 2px solid var(--accent); outline-offset: 2px; }

    .btn-cell {
      all: unset;
      width: 100%; height: 100%;
      display: grid; place-items: center;
      font-size: clamp(42px, 10vw, 92px);
      font-weight: 800;
      letter-spacing: 1px;
      cursor: pointer;
      color: var(--text);
    }
    .cell:hover { transform: translateY(-2px); }
    .cell[data-value="X"] .btn-cell { color: var(--accent); text-shadow: 0 0 18px rgba(34,211,238,0.3); }
    .cell[data-value="O"] .btn-cell { color: var(--accent-2); text-shadow: 0 0 18px rgba(167,139,250,0.3); }

    .cell.win { box-shadow: 0 0 0 2px rgba(22,163,74,.7), 0 10px 30px rgba(22,163,74,.35); }

    .toolbar {
      display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; align-items: center;
      margin-top: 16px;
    }
    .left, .right { display: flex; gap: 10px; align-items: center; }

    .button {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      color: var(--text);
      font-weight: 600;
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      transition: transform .08s ease, background .15s ease;
    }
    .button:hover { background: rgba(255,255,255,0.12); }
    .button:active { transform: translateY(1px); }

    .score {
      display: grid;
      grid-template-columns: repeat(3, auto);
      gap: 10px 16px;
      align-items: center;
      padding: 8px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      font-size: 14px;
    }
    .score strong { font-size: 16px; }

    footer { margin-top: 12px; text-align: center; color: var(--muted); font-size: 12px; }
    .link { color: var(--accent); text-decoration: none; }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Tic Tac Toe game">
    <header>
      <div class="title">Tic Tac Toe</div>
      <span class="badge" id="turnBadge">X starts</span>
    </header>

    <div class="status" id="status" aria-live="polite">
      <span id="statusText">Your move, <strong>X</strong>.</span>
    </div>

    <div class="board" id="board" role="grid" aria-label="3 by 3 grid">
      <!-- Cells will be injected by JS -->
    </div>

    <div class="toolbar">
      <div class="left">
        <button class="button" id="resetBtn" title="Reset board (keep score)">Reset Board</button>
        <button class="button" id="newGameBtn" title="New match (clear score)">New Match</button>
      </div>
      <div class="right score" aria-label="Scoreboard">
        <div><strong>X</strong></div><div id="scoreX">0</div>
        <div><strong>O</strong></div><div id="scoreO">0</div>
        <div><strong>Draws</strong></div><div id="scoreD">0</div>
      </div>
    </div>

    <footer>
      Tip: press <strong>1â€“9</strong> to play cells; <strong>R</strong> to reset.
    </footer>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('statusText');
    const badgeEl = document.getElementById('turnBadge');
    const resetBtn = document.getElementById('resetBtn');
    const newGameBtn = document.getElementById('newGameBtn');
    const scoreXEl = document.getElementById('scoreX');
    const scoreOEl = document.getElementById('scoreO');
    const scoreDEl = document.getElementById('scoreD');

    const combos = [
      [0,1,2],[3,4,5],[6,7,8], // rows
      [0,3,6],[1,4,7],[2,5,8], // cols
      [0,4,8],[2,4,6]          // diagonals
    ];

    let state, current, playing, score;

    function init(matchReset=false){
      state = Array(9).fill(null);
      current = 'X';
      playing = true;
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.setAttribute('role','gridcell');
        cell.setAttribute('aria-label', `Cell ${i+1}`);
        cell.dataset.index = i;

        const btn = document.createElement('button');
        btn.className = 'btn-cell';
        btn.type = 'button';
        btn.addEventListener('click', () => play(i));
        btn.addEventListener('keydown', (e)=>{
          if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); play(i);} 
        });
        cell.appendChild(btn);
        boardEl.appendChild(cell);
      }
      badgeEl.textContent = `${current} starts`;
      statusEl.innerHTML = `Your move, <strong>${current}</strong>.`;

      if(!matchReset){
        // keep score unless new match
        score = score || {X:0,O:0,D:0};
      }
    }

    function play(i){
      if(!playing || state[i]) return;
      state[i] = current;
      const cell = boardEl.children[i];
      cell.dataset.value = current;
      cell.querySelector('.btn-cell').textContent = current;

      const win = checkWin();
      if(win){
        playing = false;
        win.line.forEach(idx => boardEl.children[idx].classList.add('win'));
        statusEl.innerHTML = `<strong>${current}</strong> wins!`;
        badgeEl.textContent = `${current} wins`;
        score[current]++;
        updateScore();
        return;
      }
      if(state.every(Boolean)){
        playing = false;
        statusEl.textContent = 'Draw!';
        badgeEl.textContent = 'Draw';
        score.D++;
        updateScore();
        return;
      }

      current = current === 'X' ? 'O' : 'X';
      statusEl.innerHTML = `Your move, <strong>${current}</strong>.`;
      badgeEl.textContent = `${current}'s turn`;
    }

    function checkWin(){
      for(const line of combos){
        const [a,b,c] = line;
        if(state[a] && state[a] === state[b] && state[a] === state[c]){
          return { player: state[a], line };
        }
      }
      return null;
    }

    function resetBoard(){ init(/*matchReset=*/true); }
    function newMatch(){ score = {X:0,O:0,D:0}; updateScore(); init(); }
    function updateScore(){
      scoreXEl.textContent = score.X;
      scoreOEl.textContent = score.O;
      scoreDEl.textContent = score.D;
    }

    // Keyboard shortcuts 1-9 map to cells, R to reset
    window.addEventListener('keydown', (e)=>{
      if(['1','2','3','4','5','6','7','8','9'].includes(e.key)){
        const idx = Number(e.key)-1; play(idx);
      } else if(e.key.toLowerCase() === 'r'){
        resetBoard();
      }
    });

    resetBtn.addEventListener('click', resetBoard);
    newGameBtn.addEventListener('click', newMatch);

    // boot
    newMatch();
  </script>
</body>
</html>
